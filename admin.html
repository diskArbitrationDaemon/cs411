<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">

<script type="text/javascript">
		// Function for showing the appropriate table
        function showTable (str){
			document.getElementById('area2').innerHTML="";

		
            if(window.XMLHttpRequest){
                xmlhttpAssn = new XMLHttpRequest();
            }
            xmlhttpAssn.onreadystatechange=function()
            {
                if (xmlhttpAssn.readyState == 4 && xmlhttpAssn.status == 200){
                    document.getElementById("area1").innerHTML=xmlhttpAssn.responseText;
                }
            }
			
            xmlhttpAssn.open("GET", "admin_selectTable.php?table="+str, true);
            xmlhttpAssn.send();
        }
		
		// Function for showing the insert page
		function showInsert (str){
			document.getElementById('area2').innerHTML="";

		
            if(window.XMLHttpRequest){
                xmlhttpAssn = new XMLHttpRequest();
            }
            xmlhttpAssn.onreadystatechange=function()
            {
                if (xmlhttpAssn.readyState == 4 && xmlhttpAssn.status == 200){
                    document.getElementById("area1").innerHTML=xmlhttpAssn.responseText;
                }
            }
			
            xmlhttpAssn.open("GET", "admin_insertPage.php?table="+str, true);
            xmlhttpAssn.send();
        }
		
		
		// Reads form input from insertAssignment
		// Parameter type: 'insert', 'edit'
		function submitAssignment (form, assnID, type){ 
			var assnName = form.assnName.value;
			var groupWork = form.groupWork.options[form.groupWork.selectedIndex].value;
			var maxMark = form.maxMark.value;
			var avgMark = form.avgMark.value;
			var medianMark = form.medianMark.value;
			var courseName = form.courseName.options[form.courseName.selectedIndex].value;
			var month = form.monthName.options[form.monthName.selectedIndex].value;
			var day = form.dayName.options[form.dayName.selectedIndex].value;
			var year = form.year.options[form.year.selectedIndex].value;
			var hour = form.hour.options[form.hour.selectedIndex].value;
			var minute = form.minute.options[form.minute.selectedIndex].value;
			var second = form.second.options[form.second.selectedIndex].value;

			if (assnName == "")
			{
				document.getElementById('area2').innerHTML="<font color=red>* You must enter an 'Assignment Name'</font>";
			}
			
			else
			{
				document.getElementById('area2').innerHTML="";
				
				if(window.XMLHttpRequest)
				{
					xmlhttpAssn = new XMLHttpRequest();
				}
					xmlhttpAssn.onreadystatechange=function()
					{
						if (xmlhttpAssn.readyState == 4 && xmlhttpAssn.status == 200){
							document.getElementById("area2").innerHTML=xmlhttpAssn.responseText;
						}
					}
				
				var url = "";
				if (type == 'insert')   // Type: Insert Assignment
				{
					url = "admin_insertToDB.php";
				}
				if (type == "edit")
				{
					url = "admin_editToDB.php";
				}
				
				xmlhttpAssn.open("GET", url+"?table="+"assignment"+
								"&assnID="+assnID+
								"&assnName="+assnName+
								"&groupWork="+groupWork+
								"&maxMark="+maxMark+
								"&avgMark="+avgMark+
								"&medianMark="+medianMark+
								"&courseName="+courseName+
								"&month="+month+
								"&day="+day+
								"&year="+year+
								"&hour="+hour+
								"&minute="+minute+
								"&second="+second, true);
				xmlhttpAssn.send();
			}
        }
		
		
		// Function for showing the edit page
		function showEdit (table, rowID){
			document.getElementById('area2').innerHTML="";

		
            if(window.XMLHttpRequest){
                xmlhttpAssn = new XMLHttpRequest();
            }
            xmlhttpAssn.onreadystatechange=function()
            {
                if (xmlhttpAssn.readyState == 4 && xmlhttpAssn.status == 200){
                    document.getElementById("area1").innerHTML=xmlhttpAssn.responseText;
                }
            }
			
            xmlhttpAssn.open("GET", "admin_editPage.php?table="+table+"&rowID="+rowID, true);
            xmlhttpAssn.send();
        }
		
		
		// Function for showing the delete confirmation
		function showDelete (table, rowID){
			document.getElementById('area2').innerHTML="";

			var alertBox = confirm("Are you sure you want to delete this record?");
			if (alertBox == true)
			{		
				if(window.XMLHttpRequest){
					xmlhttpAssn = new XMLHttpRequest();
				}
				xmlhttpAssn.onreadystatechange=function()
				{
					if (xmlhttpAssn.readyState == 4 && xmlhttpAssn.status == 200){
						document.getElementById("area2").innerHTML=xmlhttpAssn.responseText;
					}
				}
				
				xmlhttpAssn.open("GET", "admin_deletePage.php?table="+table+"&rowID="+rowID, true);
				xmlhttpAssn.send();
			}
			
        }
		
    </script>
    
<head>

<title>Illinois CS Submission system</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<!TODO Remember to call the javascript function somewhere>
</head>
<body>
    <table width="100%" border="0">
        <tr>
            <td height="100" align="center">
            Illinois Submission System
            </td>
        </tr>
        <tr>
            <td>
                    <table width="100%" border="6">
                        <tr>
                            <td width=300>
                                <h2>Menu Here</h2>
                            </td>
                            <td align="left">
							
								<!--The Admin Content table-->
								<table width="100%" border="1">
								<tr>
									<td width=500>
										<h2>Admin Page</h2>
										
										<b>Select table:</b>
										<form>
										<select myTable="tableName" onchange="showTable(this.value)">
										<option value=""> </option>
										<option value="assignment">Assignment</option>
										<option value="course">Course</option>
										</select>
										</form>
										<br />
										<div id="area1"><b>Table will be shown here.</b></div>
										<br />
										<div id="area2"> </div>
										
										
										
									</td>
								</tr>
								</table>
								<!--Admin Content table ends here-->
								
                            </td>
                        </tr>
                    </table>

                    <script>
                   </script>
            </td>
        </tr>
    </table>
</body>
</html>
